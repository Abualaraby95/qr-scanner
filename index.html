<script>
  function onScanSuccess(decodedText, decodedResult) {
    document.getElementById('result').innerText = `تم المسح: ${decodedText}`;
    if (window.ReactNativeWebView) {
      window.ReactNativeWebView.postMessage(decodedText);
    }
    html5QrcodeScanner.clear();
  }

  function onScanFailure(error) {}

  // ضبط الخيارات لفتح الكاميرا الخلفية تلقائياً
  const config = {
    fps: 10,
    qrbox: 250,
    rememberLastUsedCamera: true,
    supportedScanTypes: [Html5QrcodeScanType.SCAN_TYPE_CAMERA],
    // أهم سطر!
    facingMode: { exact: "environment" }
  };

  const html5QrcodeScanner = new Html5QrcodeScanner(
    "reader",
    config,
    false // verbose
  );
  html5QrcodeScanner.render(onScanSuccess, onScanFailure);
</script>
